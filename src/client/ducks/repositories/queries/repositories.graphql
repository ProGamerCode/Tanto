query repositoriesNested($name: String!) {
  group(name: $name) {
    id
    name
    path
    parentGroupName
    description
    repositories(limit: 50) {
      nodes {
        ...repo
      }
    }
    groups {
      nodes {
        ...group
      }
    }
  }
  repository(name: $name) {
    ...repo
  }
}

query repositoriesTopLevel {
  repositories(limit: 50) {
    nodes {
      ...repo
    }
  }
  groups {
    nodes {
      ...group
    }
  }
}

fragment repo on Repository {
  id
  fullName
  name
  owner {
    fullName
    username
    id
  }
  groupPath
  groupName
  description
  updated
  pullRequests {
    total
  }
}

fragment group on RepositoryGroup {
  id
  name
  path
  parentGroupName
  description
  repositories(limit: 50) {
    nodes {
      ...repo
    }
  }
  groups {
    nodes {
      id
      name
      path
      parentGroupName
      description
    } 
  }
}
